function (add_single_test name file options)
    add_test(NAME "parser-${name}" COMMAND fu ${options} ${file} WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR})
    if (${file} MATCHES "fail") 
        set_tests_properties(${name} PROPERTIES WILL_FAIL TRUE)
    endif ()
endfunction ()

add_single_test(enums     "parser/pass/enums.fu" --print-ast)
add_single_test(structs   "parser/pass/structs.fu" --print-ast)
add_single_test(literals  "parser/pass/literals.fu" --print-ast)
add_single_test(functions "parser/pass/functions.fu" --print-ast)
add_single_test(exprs     "parser/pass/exprs.fu" --print-ast)
add_single_test(loops     "parser/pass/loops.fu" --print-ast)
